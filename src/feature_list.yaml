# to-do: 筹码集中分布
auto_slot : true           # 没有配置slot, 则自动配置slot, 从slot=500开始(每次全量就可以开这个)
auto_slot_start : 500 

feature_columns: 

  # - name : date
  #   slot : 10
  #   depends :  time.date
  
  - name : week
    slot :  11
    depends : time.week

  - name : rise_1d         # 最近1天涨跌
    depends : recent_rise.1d
    method : LinearDiscrete 
    slot : 50
    args:   
      start: 0
      step: 0.033
      min: -0.2
      max: 0.2

  - name : rise_3d         # 最近3天涨跌
    depends : recent_rise.3d
    method : LinearDiscrete 
    slot : 51
    args:   
      start: 0
      step: 0.033
      max: 1

  - name : rise_7d         # 最近7天涨跌
    depends : recent_rise.7d
    method : LinearDiscrete 
    slot : 52
    args:   
      start: 0
      step: 0.05
      max: 3

  - name : rise_30d         # 最近N天涨跌
    depends : recent_rise.30d
    method : LinearDiscrete 
    slot : 53
    args:   
      start: 0
      step: 0.1
      max: 3

  - name : rise_180d         # 最近N天涨跌
    depends : recent_rise.180d
    method : LinearDiscrete 
    slot : 54
    args:   
      start: 0
      step: 0.2
      max: 5
  
  # 最近n天最高价 vs 当天收盘价格
  - name : high_1d_cmp_close         # 最近N天涨跌
    depends : price.high_1d, price.close
    method : ChangeRateDiscrete 
    slot : 60
    args:   
      step: 0.03

  - name : high_3d_cmp_close         # 最近N天涨跌
    depends : price.high_3d, price.close
    method : ChangeRateDiscrete 
    slot : 61
    args:   
      step: 0.03 
  
  - name : high_7d_cmp_close         # 最近N天涨跌
    depends : price.high_7d, price.close
    method : ChangeRateDiscrete 
    slot : 62
    args:   
      step: 0.03
  
  - name : low_1d_cmp_close         # 最近N天涨跌
    depends : price.low_1d, price.close
    method : ChangeRateDiscrete 
    slot : 63
    args:   
      step: 0.03

  - name : low_3d_cmp_close         # 最近N天涨跌
    depends : price.low_3d, price.close
    method : ChangeRateDiscrete 
    slot : 64
    args:   
      step: 0.03 
  
  - name : low_7d_cmp_close         # 最近N天涨跌
    depends : price.low_7d, price.close
    method : ChangeRateDiscrete 
    slot : 65
    args:   
      step: 0.03
  

  # 高点突破: slot 80~89  低点反弹 slot 90~99
  - name :   last_1d_ath       # 过去n天的最高点，是往前多少天的最高
    depends : ath.1d
    slot : 80
    method : LogDiscrete 
    args:   
      base: 2

  - name :   last_3d_ath       # 过去n天的最高点，是往前多少天的最高点
    depends : ath.3d
    slot : 81
    method : LogDiscrete 
    args:   
      base: 2
  - name :   last_7d_ath       # 过去n天的最高点，是往前多少天的最高点
    depends : ath.7d
    slot : 82
    method : LogDiscrete 
    args:   
      base: 2
  - name :   last_14d_ath       # 过去n天的最高点，是往前多少天的最高点
    depends : ath.14d
    slot : 83
    method : LogDiscrete 
    args:   
      base: 2

  ## 破新低
  - name :   last_1d_atl       # 过去n天的最低，是往前多少天的最低 
    depends : atl.1d
    slot : 90
    method : LogDiscrete 
    args:   
      base: 2
  - name :   last_3d_atl       # 过去n天的最低，是往前多少天的最低 
    depends : atl.3d
    slot : 91
    method : LogDiscrete 
    args:   
      base: 2

  - name :   last_7d_atl       # 过去n天的最低，是往前多少天的最低 
    depends : atl.7d
    slot : 92
    method : LogDiscrete 
    args:   
      base: 2

  - name :   last_14d_atl       # 过去n天的最低，是往前多少天的最低 
    depends : atl.14d
    slot : 93
    method : LogDiscrete 
    args:   
      base: 2

  # 成交额相关: slot 100~129
  - name : amount_360d         # 最近360天平均成交额
    depends : amount.360d
    slot : 100
    method : LogDiscrete 
    args:   
      base: 2

  - name : amount_change_1d         # N天内成交额变化
    depends : amount.1d, amount.360d
    slot : 101
    method : ChangeRateDiscrete 
    args:   
      step: 0.4                    
      max : 5

  - name : amount_change_3d         # N天内成交额变化
    depends : amount.3d, amount.360d
    slot : 102
    method : ChangeRateDiscrete 
    args:   
      step: 0.4                    
      max : 5

  - name : amount_change_7d         # N天内成交额变化
    depends : amount.7d, amount.360d
    slot : 103
    method : ChangeRateDiscrete 
    args:   
      step: 0.4                    
      max : 5

  - name : amount_change_30d         # N天内成交额变化
    depends : amount.30d, amount.360d
    slot : 104
    method : ChangeRateDiscrete 
    args:   
      step: 0.4                    
      max : 5

  # 价格相关 125 ~ 180
  - name : fibonacci_3d_in30d         # 过去3天平均价格，在30交易日内的位置
    depends : price.close_ma_3d, price.low_30d, price.high_30d
    slot : 129
    method : PositionDiscrete 
    args:   
      step: 0.1

  - name : fibonacci_3d_in60d         # 过去3天平均价格，在60交易日内的位置
    depends : price.close_ma_3d, price.low_60d, price.high_60d
    slot : 130
    method : PositionDiscrete 
    args:   
      step: 0.1

  - name : fibonacci_7d_in_1yr         # 过去7天平均价格，在1年内的位置
    depends : price.close_ma_7d, price.low_360d, price.high_360d
    slot : 131
    method : PositionDiscrete 
    args:   
      step: 0.1
  
  - name : price_change_10d_ma         # 相比10日均线的位置
    depends : price.close, price.close_ma_10d
    slot : 132
    method : ChangeRateDiscrete 
    args:   
      step: 0.1
      max : 2

  - name : price_change_30d_ma         # 相比30日均线的位置
    depends : price.close, price.close_ma_30d
    slot : 133
    method : ChangeRateDiscrete 
    args:   
      step: 0.1
      min : -0.4
      max : 0.5
  
  - name : price_change_60d_ma         # 相比60日均线的位置
    depends : price.close, price.close_ma_60d
    slot : 134
    method : ChangeRateDiscrete 
    args:   
      step: 0.1
      min : -0.4
      max : 0.5

  - name : price_change_200d_ma         # 相比200日均线的位置
    depends : price.close, price.close_ma_200d
    slot : 135
    method : ChangeRateDiscrete 
    args:   
      step: 0.1
      min : -0.4
      max : 1
  
  - name : above_200d_ma_days         # 200日均线上持续运行了多少天
    depends : price.200d_ma_above_date, time.date
    slot : 136
    method : DateDiffDiscrete 
    args:   
      # step: 15 
      base : 2
  
  - name : below_200d_ma_days         # 200日均线上持续运行了多少天
    depends : price.200d_ma_below_date, time.date
    slot : 137
    method : DateDiffDiscrete 
    args:   
      # step: 15 
      base: 2
  
  ## # 过去N天的中位数价格, 即支撑位置

  - name : median_price_14d         # 过去N天的中位数价格
    depends : median_price.14d,price.close
    slot : 161
    method : ChangeRateDiscrete 
    args:   
      step: 0.03
      min : -0.3
      max : 0.3
  
  - name : median_price_30d         # 过去N天的中位数价格
    depends : median_price.30d,price.close
    slot : 162
    method : ChangeRateDiscrete 
    args:   
      step: 0.03
      min : -0.3
      max : 0.3

  - name : median_price_60d         # 过去N天的中位数价格
    depends : median_price.60d,price.close
    slot : 163
    method : ChangeRateDiscrete 
    args:   
      step: 0.03
      min : -0.3
      max : 0.3
  
  - name : median_price_180d         # 过去N天的中位数价格
    depends : median_price.180d,price.close
    slot : 164
    method : ChangeRateDiscrete 
    args:   
      step: 0.03
      min : -0.3
      max : 0.3